{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% assign namespace = language | append: 'as' %}{% assign key = 'tid' | append: theme.id %}{% if shop.metafields[namespace][key] %}{% assign data = shop.metafields[namespace][key] %}{% assign splitter = '[ly' | append: ly-static-string | append: ']' %}{% if data contains splitter %}{% assign ly_translation =  data | split: splitter | last | split: '[ly]' | first %}{% else %}{% assign ly_translation = nil %}{% endif %}{% else %}{% assign ly_translation = nil %}{% endif %}{% unless ly_translation %}{% assign namespace = language | append: 'as' %}{% assign key = 'id' | append: ly-static-string %}{% if shop.metafields[namespace][key] %}{% assign ly_translation = shop.metafields[namespace][key] %}{% else %}{% assign ly_translation = nil %}{% endif %}{% endunless %}{% if render %}{{ ly_translation }}{% endif %}